(()=>{var e={};e.id=717,e.ids=[717],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9646:e=>{"use strict";e.exports=require("child_process")},5511:e=>{"use strict";e.exports=require("crypto")},4735:e=>{"use strict";e.exports=require("events")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},8354:e=>{"use strict";e.exports=require("util")},2571:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>v,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{POST:()=>p});var o=r(2706),n=r(8203),a=r(5994),i=r(9187);let u=new(r(841)).A(process.env.STRIPE_SECRET_KEY||"",{apiVersion:"2025-09-30.clover"}),c=process.env.STRIPE_WEBHOOK_SECRET||"";async function p(e){try{let t;let r=await e.text(),s=e.headers.get("stripe-signature");try{t=u.webhooks.constructEvent(r,s,c)}catch(e){return console.error("Webhook signature verification failed:",e),i.NextResponse.json({error:"Invalid signature"},{status:400})}switch(t.type){case"checkout.session.completed":let o=t.data.object;if("paid"===o.payment_status){let e=o.metadata?.query,t=o.customer_details?.email;console.log(`✅ Payment successful for research query: "${e?.substring(0,50)}..." by ${t}`)}break;case"payment_intent.succeeded":console.log("✅ Payment intent succeeded:",t.data.object.id);break;default:console.log(`Unhandled event type: ${t.type}`)}return i.NextResponse.json({received:!0})}catch(e){return console.error("Webhook error:",e),i.NextResponse.json({error:"Webhook processing failed"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/webhook/route",pathname:"/api/webhook",filename:"route",bundlePath:"app/api/webhook/route"},resolvedPagePath:"/Users/viraat/Documents/super-research/frontend/app/api/webhook/route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:h,serverHooks:x}=d;function v(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:h})}},6487:()=>{},8335:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[989,76],()=>r(2571));module.exports=s})();